#!groovy
env.BRANCH_NAME = "release/v9.9.9"
cfg = jplConfig("jplCloseReleaseTest", "backend", "", [hipchat: "", slack: "", email: ""])
cfg.promoteBuild.enabled = true
cfg.changelog.firstTag = "v0.8.0"

pipeline {

    agent any

    stages {
        stage ("jplCloseRelease Test - Initialize") {
            steps  {
                echo "jplCloseRelease Test - Initialize"
                jplStart(cfg)
            }
        }
        stage ("jplCloseRelease Test - Close Release") {
            steps {
                echo "jplCloseRelease Test - Closing release: ${cfg.releaseTag}, short one ${cfg.releaseTagNumber}"
                jplCloseRelease(cfg)
            }
        }
    }

    options {
        timestamps()
        ansiColor("xterm")
        skipDefaultCheckout()
    }
}